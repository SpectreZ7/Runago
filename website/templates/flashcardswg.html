{% extends "base.html" %}
{% block title %} flashcards {% endblock %}
{% block content %}
<head>
    <style>
        /* .vertical-text input[type= "text"]{
            margin-top: 400px;
        } */
        .vertical-text input{
            display: flex;
            width: 280px;
            min-height: 20px;
            font-size: 35px;
            /* flex-direction: column; */
        }
        #word-input{
            font-family: 'Open Sans', sans-serif;
            font-size: 35px;
        }
        .definition-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .definition-container p{
            font-family: 'Open Sans', sans-serif;
            font-size: 24px;
            color: rgb(254, 254, 254);
        }
        
        .center-content {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        body {
            font-family: 'Open Sans', sans-serif;
        }
        .error{
            color:red;
            font-weight:bold;
        }
        input[type="text"] {
            border-radius: 15px;
        }
        #definition-form {
        position: absolute;
        top: 30%;
        left: 52%;
        transform: translate(-50%, -50%);
        display: flex;
        align-items: center;
        justify-content: center;
        }
        input[type="submit"] {
            background-color: #282f70;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            font-size: 16px;
            cursor: pointer;
            font-weight:bold ;
            font-family: 'Roboto', sans-serif;
        }
        #add-word-button{
            background-color: #282f70;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            font-size: 60px; /* Size of the plus sign */
            cursor: pointer;
            font-weight: bold;
            font-family: 'Roboto', sans-serif;
            text-align: center; /* Centers the text horizontally */
            line-height: 1; /* Adjust this value to center the text vertically */
            vertical-align: middle; /* Aligns the text vertically */
            display: flex; /* Use flexbox to center content */
            justify-content: center; /* Center horizontally for flex items */
            align-items: center; /* Center vertically for flex items */
            top:100%
        }
        
        </style>
    
</head>
<form method="POST" action="{{ url_for('pages.flashcardswg') }}" id="definition-form">
    <div class="center-content" style="display: flex; flex-direction: column; align-items: center;">
        <div class = "vertical-text" style = "margin-top: 300px">
            <input type="text" name="word" id="word-input" style="width: 300px; height: 50px; margin-top:80px">
            <input type="button" value="+" style="width: 150px; height: 50px;" id="add-word-button">
        </div>
        <input type="submit" id="play-game-button" value="Generate flashcards" style="width:180px; height: 50px; margin-top: 10px;">
    </div>
</form>

<script>
    var form = document.getElementById("definition-form");
    var input = document.getElementById("word-input");
    var error = document.createElement("p"  );
    error.classList.add("error");
    error.textContent = "Please enter a word.";
    error.style.display = "none";
    var addButton = document.getElementById("add-word-button");
    form.addEventListener("submit", function(e) {
        if (input.value === "") {
            e.preventDefault();
            input.parentNode.insertBefore(error, input.nextSibling);
            error.style.display = "block";
        }
    });
    addButton.addEventListener("click", function() {
        var newInput = document.createElement("input");
        newInput.type = "text";
        newInput.style.width = "300px";
        newInput.style.height = "50px";
        newInput.style.marginTop = "10px";
        input.parentNode.insertBefore(newInput, addButton);
        
    }); 
    document.getElementById("play-game-button").addEventListener("click", function(event) {
        event.preventDefault();
        var words = Array.from(document.querySelectorAll(".vertical-text input[type='text']"))
            .map(function(input) { return input.value.trim(); })
            .filter(function(word) { return word.length > 0; });
        if (words.length > 0) {
            fetch("/flashcards_generator", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(words)
                
            })
            .then(function(response) {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error("Network response was not ok.");
                }
            })
            .then(function(data) {
                definitions = {}
               // console.log(data.scrambled_definitions);
                console.log(data) 
                if (data && data.definitions){
                    Object.keys(data.definitions).forEach(word => {
                        definitions[word] = data.definitions[word];
                    });
                } else {
                    console.error("data or data.definitions is undefined:", data);
                }
                window.location.href = "/flashcards_generator?definitions=" + encodeURIComponent(JSON.stringify(definitions));
            })
            .catch(function(error) {
                console.error("Error:", error);
            });
        }
    });
    
    
      



</script>
{% endblock %}